(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1242:function(e,a,t){"use strict";t.d(a,"a",function(){return r});var n=t(9);function r(e){return{type:n.b,payload:e}}},1261:function(e,a,t){"use strict";var n=t(333),r=t(0),c=t.n(r),l=t(2),s=t.n(l),i=t(1242),o=t(23);a.a=Object(o.b)(function(e){return{search:e.settings.search}},function(e){return{onChangeSearchValue:function(a){e(Object(i.a)(a.target.value))}}})(function(e){var a=Object(r.useState)(e.isActive),t=Object(n.a)(a,2),l=t[0],i=t[1],o=s()("search-wrapper",{active:l}),m=function(){i(!l)};return c.a.createElement("div",{className:o},c.a.createElement("div",{className:"input-holder"},c.a.createElement("input",{className:"search-input",onChange:e.onChangeSearchValue,onKeyPress:e.keyPressed,placeholder:e.placeholder,type:"text",value:e.search}),c.a.createElement("button",{className:"search-icon",onClick:m},c.a.createElement("span",null))),c.a.createElement("button",{className:"close",onClick:m}))})},1386:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(101),l=t(220),s=t(77),i=t.n(s),o=t(124),m=t(222),u=t(14),d=t(15),p=t(25),h=t(17),E=t(16),g=t(51),f=t.n(g),b=t(23),v=t(258),N=(t(1261),t(37)),D=t.n(N),y=t(133),I=(t(127),t(46)),O=t(181),w=t.n(O),j=t(138),C=t.n(j),k=t(549),x=t(397),A=t(398),S=t(399),U=t(171),P=t(334),B=t(335),T=t(336),F=t(337),L=t(62),q=function(e){Object(h.a)(t,e);var a=Object(E.a)(t);function t(){var e;return Object(u.a)(this,t),(e=a.call(this)).handleClickOpenDialog=function(a,t){e.setState({modal:!e.state.modal,req:t,rowIndex:a})},e.handleClickCloseDialog=function(){e.setState({modal:!e.state.modal,req:!1,rowIndex:0})},e.state={rowIndex:0,req:!1,modal:!1},e}return Object(d.a)(t,[{key:"renderDialog",value:function(){var e=this.props,a=e.messagesData,t=(e.className,this.state),n=t.modal,c=t.req;if(n)return r.a.createElement(k.a,{fade:!1,isOpen:n,toggle:this.handleClickCloseDialog},r.a.createElement(x.a,{toggle:this.handleClickCloseDialog},c?"Request":"Response"),r.a.createElement(A.a,null,r.a.createElement(w.a,{src:c?a[this.state.rowIndex].request:a[this.state.rowIndex].response})),r.a.createElement(S.a,null,r.a.createElement(U.a,{color:"link",onClick:this.handleClickCloseDialog},"Cancel"),r.a.createElement(U.a,{color:"primary",onClick:this.handleClickCloseDialog},"Ok")))}},{key:"render",value:function(){var e=this.props,a=e.usersData,t=e.match;return r.a.createElement(P.a,null,r.a.createElement(B.a,{md:"12"},r.a.createElement(T.a,{className:"main-card mb-3"},r.a.createElement(F.a,null,r.a.createElement(L.a,{className:"-striped -highlight",columns:[{columns:[{Header:"Full Name",id:"row",accessor:function(e){return e},Cell:function(e){return r.a.createElement("div",null,r.a.createElement(I.b,{to:t.path+"/".concat(e.value.accountID)},r.a.createElement("div",{className:"widget-content p-0"},r.a.createElement("div",{className:"widget-content-wrapper"},r.a.createElement("div",{className:"widget-content-left mr-3"},r.a.createElement("div",{className:"widget-content-left"},r.a.createElement("img",{alt:"",className:"rounded-circle",src:void 0!==e.value.avatar?"https://wssdev.nexustls.com/files/file/".concat(e.value.avatar,"/medium"):C.a,width:52}))),r.a.createElement("div",{className:"widget-content-left flex2"},r.a.createElement("div",{className:"widget-heading"},e.value.firstName," ",e.value.lastName))))))}},{Header:"User Name",accessor:"username"},{Header:"Account ID",accessor:"accountID"}]}],data:a,defaultPageSize:5})))))}}]),t}(r.a.Component),G=Object(c.f)(q),M=t(400),R=t(446),V=t(448),z=(t(1345),t(577),t(139),t(29)),H=function(e){Object(h.a)(t,e);var a=Object(E.a)(t);function t(e){var n;return Object(u.a)(this,t),(n=a.call(this,e)).handleChangeApplicationSearch=function(e){n.setState(Object(m.a)({},e.target.name,e.target.value))},n.handleChange=function(e){var a=e.target.value,t=e.target.name;0===a.length?n.setState({params:{type:"",search:""}}):n.setState({params:{type:t,search:a}})},n.onBlurUserInput=function(e){var a=n.state.searchUserList,t=n.state.searchUserList.findIndex(function(a){return a.type===e.target.name});-1===t?a.push({type:e.target.name,search:e.target.value}):a[t]={type:e.target.name,search:e.target.value},a=a.filter(function(e){return""!==e.search}),console.log(a),n.setState({searchUserList:a})},n.state={searchUserList:[],firstname:"",lastname:"",phoneNumber:"",params:{search:"",type:""}},n.handleOnSubmit=n.handleOnSubmit.bind(Object(p.a)(n)),n}return Object(d.a)(t,[{key:"handleOnSubmit",value:function(){var e=Object(o.a)(i.a.mark(function e(a){var t,n,r,c,l,s,m,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.searchUserList,n=[],r=this.state,c=r.firstname,l=r.lastname,s=r.phoneNumber,m={name:{firstName:c,lastName:l},phone:s},""===c&&""===l&&""===s){e.next=16;break}return e.next=8,z.c.getApplicationsByName(m);case 8:if(!((u=e.sent).status=200)){e.next=14;break}return e.next=12,Promise.all(u.data.applications.map(function(){var e=Object(o.a)(i.a.mark(function e(a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.push({type:"accountID",search:a.accountID});case 1:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}()));case 12:n=n.concat(t),this.props.fetchUsers(n);case 14:e.next=17;break;case 16:t.length>0&&this.props.fetchUsers(t);case 17:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"renderUserTable",value:function(){var e=this.props,a=e.pending,t=e.error,n=e.users;return a?r.a.createElement("div",{className:"text-center"},r.a.createElement(D.a,{type:"ball-scale"})):t?r.a.createElement("div",{className:"widget-content"},r.a.createElement("div",{className:"widget-content-wrapper"},r.a.createElement("div",{className:"widget-content-right ml-0 mr-3"},r.a.createElement("div",{className:"widget-subheading"},t)))):0===n.length?r.a.createElement("div",{className:"widget-content"},r.a.createElement("div",{className:"widget-content-wrapper"},r.a.createElement("div",{className:"widget-content-right ml-0 mr-3"},r.a.createElement("div",{className:"widget-subheading"},"There are no users")))):r.a.createElement(G,{usersData:n})}},{key:"render",value:function(){return console.log(this.state),r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{component:"div",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1,transitionName:"TabsAnimation"},r.a.createElement(v.a,{heading:"User Manager",icon:"pe-7s-user icon-gradient bg-night-fade",subheading:""}),r.a.createElement(B.a,{md:"12"},r.a.createElement(T.a,{className:"main-card mb-3"},r.a.createElement(M.a,{className:"card-header-tab"},"Advanced search"),r.a.createElement(F.a,null,r.a.createElement(P.a,null,r.a.createElement(B.a,{md:2},r.a.createElement(R.a,null,r.a.createElement(V.a,{id:"usernameID",name:"username",onBlur:this.onBlurUserInput,onChange:this.handleOnChange,placeholder:"UserName",type:"text"})),r.a.createElement(R.a,null,r.a.createElement(V.a,{id:"phoneID",name:"phone",onBlur:this.onBlurUserInput,onChange:this.handleOnChange,placeholder:"Phone Number",type:"text"})),r.a.createElement(R.a,null,r.a.createElement(V.a,{id:"accountID",name:"accountID",onBlur:this.onBlurUserInput,onChange:this.handleOnChange,placeholder:"Account ID",type:"text"})),r.a.createElement(R.a,null,r.a.createElement(V.a,{id:"emailID",name:"email",onBlur:this.onBlurUserInput,onChange:this.handleOnChange,placeholder:"Email",type:"text"}))),r.a.createElement(B.a,{md:2},r.a.createElement(R.a,null,r.a.createElement(V.a,{id:"firstNameID",name:"firstname",onBlur:this.onBlurUserInput,onChange:this.handleChangeApplicationSearch,placeholder:"First Name",type:"text"})),r.a.createElement(R.a,null,r.a.createElement(V.a,{id:"lastNameID",name:"lastname",onBlur:this.onBlurUserInput,onChange:this.handleChangeApplicationSearch,placeholder:"Last Name",type:"text"})),r.a.createElement(R.a,null,r.a.createElement(V.a,{id:"passportID",name:"passportID",onChange:this.handleChangeApplicationSearch,placeholder:"Passport ID",type:"text"})),r.a.createElement(U.a,{className:"border-0 btn-pill btn-wide  btn-transition active",color:"alternate",onClick:this.handleOnSubmit,outline:!0},"Search"))),this.renderUserTable())))))}}]),t}(n.Component),J=Object(c.f)(H),K=Object(b.b)(function(e){return{users:e.user.users,search:e.settings.search,pending:e.user.pending,error:e.user.error,profile:e.auth.profile,session:e.auth.session}},function(e){return{fetchUsers:function(a){return e(Object(y.b)(a))}}})(J),Q=t(587),W=t(9);t(578);function X(e){return{type:W.A,result:e}}function Y(e){return function(a){a({type:W.z}),z.d.getPresenceInfo(e).then(function(e){void 0!==e.data.varStatus?a(X(e.data)):void 0!==e.data.error&&a(X(e.data.error))}).catch(function(e){a(function(e){return{type:W.y,error:e}}(""))})}}var Z=function(e){Object(h.a)(t,e);var a=Object(E.a)(t);function t(){return Object(u.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.user;e?this.props.fetchPresenceInfo({accountID:e.accountID}):this.props.history.push("/user-manager/users")}},{key:"render",value:function(){return this.props.user?r.a.createElement(n.Fragment,null,r.a.createElement(v.a,{heading:"",icon:"pe-7s-science icon-gradient bg-happy-itmeo",subheading:""}),r.a.createElement(Q.a,{userInfo:this.props.user})):r.a.createElement("div",null)}}]),t}(r.a.Component),$=Object(c.f)(Z),_=Object(b.b)(function(e,a){var t=a.match.params.accountID;return{user:e.user.users.find(function(e){return e.accountID===t})}},function(e){return{fetchApllicationsByAccount:function(a){return e(Object(y.a)(a))},fetchPresenceInfo:function(a){return e(Y(a))}}})($),ee=t(1382),ae=t(449),te=t(100),ne=t(394),re=t(395),ce=t(401),le=t(402),se=t(18),ie=function(e){Object(h.a)(t,e);var a=Object(E.a)(t);function t(){return Object(u.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"render",value:function(){var e=this.props.application;return r.a.createElement(n.Fragment,null,r.a.createElement(B.a,{md:"6"},r.a.createElement(T.a,{className:"main-card mb-3"},r.a.createElement(M.a,{className:"card-header-tab"},r.a.createElement("div",{className:"card-header-title"},"Appplication Info")),r.a.createElement(F.a,null,r.a.createElement(ne.a,null,r.a.createElement(re.a,null,r.a.createElement(ce.a,null,"First Name"),r.a.createElement(le.a,null,e.firstName)),r.a.createElement(re.a,null,r.a.createElement(ce.a,null,"Last Name"),r.a.createElement(le.a,null,e.lastName)),r.a.createElement(re.a,null,r.a.createElement(ce.a,null,"Application status"),r.a.createElement(le.a,null,e.status)),r.a.createElement(re.a,null,r.a.createElement(ce.a,null,"Country Name"),r.a.createElement(le.a,null,e.countryName)),r.a.createElement(re.a,null,r.a.createElement(ce.a,null,"Country ISO Code"),r.a.createElement(le.a,null,e.countryISOCode)),r.a.createElement(re.a,null,r.a.createElement(ce.a,null,"Date Time"),r.a.createElement(le.a,null,Object(se.b)(e.createdAt))),r.a.createElement(re.a,null,r.a.createElement(ce.a,null,"Application ID"),r.a.createElement(le.a,null,e.ID)))))))}}]),t}(r.a.Component),oe=t(405),me=(t(122),t(140)),ue=t.n(me),de=t(52),pe=function(e){Object(h.a)(t,e);var a=Object(E.a)(t);function t(){return Object(u.a)(this,t),a.apply(this,arguments)}return Object(d.a)(t,[{key:"renderTable",value:function(){var e=this.props,a=e.documents,t=e.pending,n=e.error;if(console.log(t,n),t)return r.a.createElement("div",{className:"text-center"},r.a.createElement(D.a,{type:"ball-scale"}));if(n){if(!n.accountID)return r.a.createElement("div",{className:"dropdown-menu-header"},r.a.createElement("div",{className:"dropdown-menu-header-inner bg-primary"},r.a.createElement("div",{className:"menu-header-content"},r.a.createElement("div",{className:"widget-subheading"},n))));var c=n;return r.a.createElement(T.a,{className:"card-shadow-primary profile-responsive card-border mb-3"},r.a.createElement(M.a,null,"\u0417\u0430\u044f\u0432\u043a\u0430 \u0443\u0436\u0435 \u043e\u0442\u043a\u0440\u044b\u0442\u043e "),r.a.createElement("div",{className:"dropdown-menu-header"},r.a.createElement("div",{className:"dropdown-menu-header-inner bg-info"},r.a.createElement("div",{className:"menu-header-image opacity-2",style:{backgroundImage:"url("+ue.a+")"}}),r.a.createElement("div",{className:"menu-header-content btn-pane-right"},r.a.createElement("div",{className:"avatar-icon-wrapper mr-2 avatar-icon-xl"},r.a.createElement("div",{className:"avatar-icon rounded"},r.a.createElement("img",{alt:"Avatar 5",src:void 0!==c.avatar?"https://wssdev.nexustls.com/files/file/".concat(c.avatar,"/medium"):C.a}))),r.a.createElement("div",null,r.a.createElement("h5",{className:"menu-header-title"},c.firstName," ",c.lastName))))),r.a.createElement(F.a,{className:"p-0"},r.a.createElement(ne.a,{flush:!0},r.a.createElement(re.a,null,r.a.createElement("b",{className:"text-dark"},"First Name: "),c.firstName),r.a.createElement(re.a,null,r.a.createElement("b",{className:"text-dark"},"Last Name: "),c.lastName),r.a.createElement(re.a,null,r.a.createElement("b",{className:"text-dark"},"User Name: "),c.username),r.a.createElement(re.a,null,r.a.createElement("b",{className:"text-dark"},"Account ID: "),c.accountID))))}return 0==a.length?r.a.createElement("div",{className:"dropdown-menu-header"},r.a.createElement("div",{className:"dropdown-menu-header-inner bg-primary"},r.a.createElement("div",{className:"menu-header-content"},r.a.createElement("div",{className:"widget-subheading"},"There are no documents")))):a.length>0?r.a.createElement(oe.a,{bordered:!0,className:"mb-0"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Document Info"),r.a.createElement("th",null,"Image"))),a.map(function(e,a){return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},a+1),r.a.createElement("td",{width:"50%"},r.a.createElement("b",{className:"text-dark"},"Status: "),Object(se.c)(e.status),r.a.createElement("div",{className:"divider"}),r.a.createElement("b",{className:"text-dark"},"File name: "),e.fileInfo.originalName,r.a.createElement("div",{className:"divider"}),r.a.createElement("b",{className:"text-dark"},"Type name: "),e.documentType.typeName),r.a.createElement("td",{align:"center",height:"200px",width:"40%"},r.a.createElement(de.RViewer,{imageUrls:"http://10.7.8.129:9004/document/".concat(e.ID),options:W.Q},r.a.createElement(de.RViewerTrigger,null,r.a.createElement("img",{src:"http://10.7.8.129:9004/document/".concat(e.ID),style:{cursor:"pointer","max-width":"100%","max-height":"100%",verticalAlign:"middle"}}))))))})):void 0}},{key:"render",value:function(){var e=this.props,a=(e.documents,e.pending,e.error);return console.log(a),r.a.createElement(n.Fragment,null,r.a.createElement(B.a,{lg:"12",xl:"6"},r.a.createElement(T.a,{className:"main-card mb-3"},r.a.createElement(M.a,{className:"card-header-tab"},r.a.createElement("div",{className:"card-header-title"},"Documents")),r.a.createElement(F.a,null,this.renderTable()))))}}]),t}(r.a.Component),he=t(548),Ee=function(e){Object(h.a)(t,e);var a=Object(E.a)(t);function t(){var e;return Object(u.a)(this,t),(e=a.call(this)).state={startProcedure:!1,page:0,pageSize:100},e.handleStartProcedure=e.handleStartProcedure.bind(Object(p.a)(e)),e.handleDoneProcedure=e.handleDoneProcedure.bind(Object(p.a)(e)),e.handleGetApplications=e.handleGetApplications.bind(Object(p.a)(e)),e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,a=e.fetchDocuments,t=e.application;e.fetchUsers;t?a({applicationID:t.ID}):this.props.history.goBack()}},{key:"handleStartProcedure",value:function(){this.setState({startProcedure:!0})}},{key:"handleDoneProcedure",value:function(){this.setState({startProcedure:!1})}},{key:"handleGetApplications",value:function(){var e=this,a=this.props.applications.filter(function(a){return a.ID!==e.props.application.ID});a.length>0&&this.props.history.push("/passport-manager/applications/".concat(a[0].ID))}},{key:"render",value:function(){var e=this.state.startProcedure,a=this.props,t=a.application,c=a.match,l=a.documents,s=a.errorDoc,i=a.pendingDoc;return e&&t?r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{component:"div",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1,transitionName:"TabsAnimation"},r.a.createElement(he.a,{accountID:t.accountID,applicationID:t.ID,backUrl:c.url,documents:l,handleDoneProcedure:this.handleDoneProcedure,handleGetApplications:this.handleGetApplications}))):t?r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{component:"div",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1,transitionName:"TabsAnimation"},r.a.createElement(ae.a,{fluid:!0},r.a.createElement(P.a,null,r.a.createElement(B.a,{md:"12"},r.a.createElement(T.a,{className:"main-card mb-3"},r.a.createElement(M.a,{className:"card-header-tab"},r.a.createElement("div",{className:"card-header-title"},r.a.createElement(U.a,{className:"border-0 btn-pill btn-wide btn-transition active",color:"alternate",disabled:0===l.length||"PENDING"!==t.status,onClick:this.handleStartProcedure,outline:!0},"Begin review")),r.a.createElement("div",{className:"btn-actions-pane-right"},"Status ","    ",r.a.createElement(U.a,{className:"mb-2 mr-2 btn-transition",color:"alternate",disabled:!0,outline:!0},t.status))),r.a.createElement(F.a,{className:"main-card mb-3"},r.a.createElement(P.a,null,r.a.createElement(ie,{application:t}),r.a.createElement(pe,{documents:l,error:s,pending:i}))))))))):r.a.createElement("div",null)}}]),t}(r.a.Component),ge=Object(c.f)(Ee),fe=Object(b.b)(function(e,a){var t=a.match.params.applicationID;return{pendingDoc:e.passport.pending,errorDoc:e.passport.error,users:e.user.users,pending:e.user.pending,error:e.user.error,documents:e.passport.documents,application:e.user.applications.find(function(e){return e.ID===t}),applications:e.user.applications}},function(e){return{fetchDocuments:function(a){return e(Object(te.d)(a))},fetchUsers:function(a){return e(Object(y.b)(a))},deleteApplication:function(a){return e(Object(te.a)(a))},fetchApplications:function(a){return e(Object(te.c)(a))}}})(ge);a.default=Object(c.f)(function(e){var a=e.match;console.log("User Manager");JSON.parse(localStorage.getItem(ee));return r.a.createElement(l.a,null,r.a.createElement(c.b,{component:K,exact:!0,path:"".concat(a.url,"/users")}),r.a.createElement(c.b,{component:_,exact:!0,path:"".concat(a.url,"/users/:accountID"),searchPassportManager:!1}),r.a.createElement(c.b,{component:fe,exact:!0,path:"/user-manager/users/applicaion/:applicationID"}))})}}]);
//# sourceMappingURL=6.942d0d7d.chunk.js.map