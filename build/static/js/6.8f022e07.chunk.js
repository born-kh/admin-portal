(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1679:function(e,a,t){"use strict";t.d(a,"a",function(){return r});var n=t(7);function r(e){return{type:n.b,payload:e}}},1698:function(e,a,t){"use strict";var n=t(1704),r=t(0),c=t.n(r),l=t(2),s=t.n(l),i=t(1679),o=t(28);a.a=Object(o.b)(function(e){return{search:e.settings.search}},function(e){return{onChangeSearchValue:function(a){e(Object(i.a)(a.target.value))}}})(function(e){var a=Object(r.useState)(e.isActive),t=Object(n.a)(a,2),l=t[0],i=t[1],o=s()("search-wrapper",{active:l}),m=function(){i(!l)};return c.a.createElement("div",{className:o},c.a.createElement("div",{className:"input-holder"},c.a.createElement("input",{className:"search-input",onChange:e.onChangeSearchValue,onKeyPress:e.keyPressed,placeholder:e.placeholder,type:"text",value:e.search}),c.a.createElement("button",{className:"search-icon",onClick:m},c.a.createElement("span",null))),c.a.createElement("button",{className:"close",onClick:m}))})},1824:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(111),l=t(403),s=t(122),i=t.n(s),o=t(194),m=t(249),u=t(11),d=t(12),p=t(14),h=t(13),E=t(22),b=t(15),g=t(58),f=t.n(g),v=t(28),N=t(290),O=(t(1698),t(48)),D=t.n(O),I=t(152),y=(t(140),t(57)),j=t(203),w=t.n(j),C=t(94),k=t.n(C),x=t(619),A=t(499),S=t(500),U=t(501),P=t(192),B=t(378),T=t(379),F=t(382),L=t(383),q=t(82),G=function(e){function a(){var e;return Object(u.a)(this,a),(e=Object(p.a)(this,Object(h.a)(a).call(this))).handleClickOpenDialog=function(a,t){e.setState({modal:!e.state.modal,req:t,rowIndex:a})},e.handleClickCloseDialog=function(){e.setState({modal:!e.state.modal,req:!1,rowIndex:0})},e.state={rowIndex:0,req:!1,modal:!1},e.handleClickOpenDialog=e.handleClickOpenDialog.bind(Object(E.a)(e)),e.handleClickCloseDialog=e.handleClickCloseDialog.bind(Object(E.a)(e)),e}return Object(b.a)(a,e),Object(d.a)(a,[{key:"renderDialog",value:function(){var e=this.props,a=e.messagesData,t=(e.className,this.state),n=t.modal,c=t.req;if(n)return r.a.createElement(x.a,{fade:!1,isOpen:n,toggle:this.handleClickCloseDialog},r.a.createElement(A.a,{toggle:this.handleClickCloseDialog},c?"Request":"Response"),r.a.createElement(S.a,null,r.a.createElement(w.a,{src:c?a[this.state.rowIndex].request:a[this.state.rowIndex].response})),r.a.createElement(U.a,null,r.a.createElement(P.a,{color:"link",onClick:this.handleClickCloseDialog},"Cancel"),r.a.createElement(P.a,{color:"primary",onClick:this.handleClickCloseDialog},"Ok")))}},{key:"render",value:function(){var e=this.props,a=e.usersData,t=e.match;return r.a.createElement(B.a,null,r.a.createElement(T.a,{md:"12"},r.a.createElement(F.a,{className:"main-card mb-3"},r.a.createElement(L.a,null,r.a.createElement(q.a,{className:"-striped -highlight",columns:[{columns:[{Header:"Full Name",id:"row",accessor:function(e){return e},Cell:function(e){return r.a.createElement("div",null,r.a.createElement(y.a,{to:t.path+"/".concat(e.value.accountID)},r.a.createElement("div",{className:"widget-content p-0"},r.a.createElement("div",{className:"widget-content-wrapper"},r.a.createElement("div",{className:"widget-content-left mr-3"},r.a.createElement("div",{className:"widget-content-left"},r.a.createElement("img",{alt:"",className:"rounded-circle",src:void 0!==e.value.avatar?"https://wssdev.nexustls.com/files/file/".concat(e.value.avatar,"/medium"):k.a,width:52}))),r.a.createElement("div",{className:"widget-content-left flex2"},r.a.createElement("div",{className:"widget-heading"},e.value.firstName," ",e.value.lastName))))))}},{Header:"User Name",accessor:"username"},{Header:"Account ID",accessor:"accountID"}]}],data:a,defaultPageSize:5})))))}}]),a}(r.a.Component),M=Object(c.f)(G),J=t(502),R=t(532),V=t(534),H=(t(1783),t(660),t(156),t(38)),z=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(p.a)(this,Object(h.a)(a).call(this,e))).handleChangeApplicationSearch=function(e){t.setState(Object(m.a)({},e.target.name,e.target.value))},t.handleChange=function(e){var a=e.target.value,n=e.target.name;0===a.length?t.setState({params:{type:"",search:""}}):t.setState({params:{type:n,search:a}})},t.onBlurUserInput=function(e){var a=t.state.searchUserList,n=t.state.searchUserList.findIndex(function(a){return a.type===e.target.name});-1===n?a.push({type:e.target.name,search:e.target.value}):a[n]={type:e.target.name,search:e.target.value},a=a.filter(function(e){return""!==e.search}),console.log(a),t.setState({searchUserList:a})},t.state={searchUserList:[],firstname:"",lastname:"",phoneNumber:"",params:{search:"",type:""}},t.handleOnSubmit=t.handleOnSubmit.bind(Object(E.a)(t)),t}return Object(b.a)(a,e),Object(d.a)(a,[{key:"handleOnSubmit",value:function(){var e=Object(o.a)(i.a.mark(function e(a){var t,n,r,c,l,s,m,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.searchUserList,n=[],r=this.state,c=r.firstname,l=r.lastname,s=r.phoneNumber,m={name:{firstName:c,lastName:l},phone:s},""===c&&""===l&&""===s){e.next=16;break}return e.next=8,H.b.getApplicationsByName(m);case 8:if(!((u=e.sent).status=200)){e.next=14;break}return e.next=12,Promise.all(u.data.applications.map(function(){var e=Object(o.a)(i.a.mark(function e(a){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.push({type:"accountID",search:a.accountID});case 1:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}()));case 12:n=n.concat(t),this.props.fetchUsers(n);case 14:e.next=17;break;case 16:t.length>0&&this.props.fetchUsers(t);case 17:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}()},{key:"renderUserTable",value:function(){var e=this.props,a=e.pending,t=e.error,n=e.users;return a?r.a.createElement("div",{className:"text-center"},r.a.createElement(D.a,{type:"ball-scale"})):t?r.a.createElement("div",{className:"widget-content"},r.a.createElement("div",{className:"widget-content-wrapper"},r.a.createElement("div",{className:"widget-content-right ml-0 mr-3"},r.a.createElement("div",{className:"widget-subheading"},t)))):0===n.length?r.a.createElement("div",{className:"widget-content"},r.a.createElement("div",{className:"widget-content-wrapper"},r.a.createElement("div",{className:"widget-content-right ml-0 mr-3"},r.a.createElement("div",{className:"widget-subheading"},"There are no users")))):r.a.createElement(M,{usersData:n})}},{key:"render",value:function(){return console.log(this.state),r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{component:"div",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1,transitionName:"TabsAnimation"},r.a.createElement(N.a,{heading:"User Manager",icon:"pe-7s-user icon-gradient bg-night-fade",subheading:""}),r.a.createElement(T.a,{md:"12"},r.a.createElement(F.a,{className:"main-card mb-3"},r.a.createElement(J.a,{className:"card-header-tab"},"Advanced search"),r.a.createElement(L.a,null,r.a.createElement(B.a,null,r.a.createElement(T.a,{md:2},r.a.createElement(R.a,null,r.a.createElement(V.a,{id:"usernameID",name:"username",onBlur:this.onBlurUserInput,onChange:this.handleOnChange,placeholder:"UserName",type:"text"})),r.a.createElement(R.a,null,r.a.createElement(V.a,{id:"phoneID",name:"phone",onBlur:this.onBlurUserInput,onChange:this.handleOnChange,placeholder:"Phone Number",type:"text"})),r.a.createElement(R.a,null,r.a.createElement(V.a,{id:"accountID",name:"accountID",onBlur:this.onBlurUserInput,onChange:this.handleOnChange,placeholder:"Account ID",type:"text"})),r.a.createElement(R.a,null,r.a.createElement(V.a,{id:"emailID",name:"email",onBlur:this.onBlurUserInput,onChange:this.handleOnChange,placeholder:"Email",type:"text"}))),r.a.createElement(T.a,{md:2},r.a.createElement(R.a,null,r.a.createElement(V.a,{id:"firstNameID",name:"firstname",onBlur:this.onBlurUserInput,onChange:this.handleChangeApplicationSearch,placeholder:"First Name",type:"text"})),r.a.createElement(R.a,null,r.a.createElement(V.a,{id:"lastNameID",name:"lastname",onBlur:this.onBlurUserInput,onChange:this.handleChangeApplicationSearch,placeholder:"Last Name",type:"text"})),r.a.createElement(R.a,null,r.a.createElement(V.a,{id:"passportID",name:"passportID",onChange:this.handleChangeApplicationSearch,placeholder:"Passport ID",type:"text"})),r.a.createElement(P.a,{className:"border-0 btn-pill btn-wide  btn-transition active",color:"alternate",onClick:this.handleOnSubmit,outline:!0},"Search"))),this.renderUserTable())))))}}]),a}(n.Component),K=Object(c.f)(z),Q=Object(v.b)(function(e){return{users:e.user.users,search:e.settings.search,pending:e.user.pending,error:e.user.error,profile:e.auth.profile,session:e.auth.session}},function(e){return{fetchUsers:function(a){return e(Object(I.b)(a))}}})(K),W=t(668),X=t(7);t(661);function Y(e){return{type:X.u,result:e}}function Z(e){return function(a){a({type:X.t}),H.c.getPresenceInfo(e).then(function(e){void 0!==e.data.varStatus?a(Y(e.data)):void 0!==e.data.error&&a(Y(e.data.error))}).catch(function(e){a(function(e){return{type:X.s,error:e}}(""))})}}var $=function(e){function a(){return Object(u.a)(this,a),Object(p.a)(this,Object(h.a)(a).apply(this,arguments))}return Object(b.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.user;e?this.props.fetchPresenceInfo({accountID:e.accountID}):this.props.history.push("/user-manager/users")}},{key:"render",value:function(){return this.props.user?r.a.createElement(n.Fragment,null,r.a.createElement(N.a,{heading:"",icon:"pe-7s-science icon-gradient bg-happy-itmeo",subheading:""}),r.a.createElement(W.a,{userInfo:this.props.user})):r.a.createElement("div",null)}}]),a}(r.a.Component),_=Object(c.f)($),ee=Object(v.b)(function(e,a){var t=a.match.params.accountID;return{user:e.user.users.find(function(e){return e.accountID===t})}},function(e){return{fetchApllicationsByAccount:function(a){return e(Object(I.a)(a))},fetchPresenceInfo:function(a){return e(Z(a))}}})(_),ae=t(1820),te=t(535),ne=t(110),re=t(496),ce=t(497),le=t(503),se=t(504),ie=t(20),oe=function(e){function a(){return Object(u.a)(this,a),Object(p.a)(this,Object(h.a)(a).apply(this,arguments))}return Object(b.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this.props.application;return r.a.createElement(n.Fragment,null,r.a.createElement(T.a,{md:"6"},r.a.createElement(F.a,{className:"main-card mb-3"},r.a.createElement(J.a,{className:"card-header-tab"},r.a.createElement("div",{className:"card-header-title"},"Appplication Info")),r.a.createElement(L.a,null,r.a.createElement(re.a,null,r.a.createElement(ce.a,null,r.a.createElement(le.a,null,"First Name"),r.a.createElement(se.a,null,e.firstName)),r.a.createElement(ce.a,null,r.a.createElement(le.a,null,"Last Name"),r.a.createElement(se.a,null,e.lastName)),r.a.createElement(ce.a,null,r.a.createElement(le.a,null,"Application status"),r.a.createElement(se.a,null,e.status)),r.a.createElement(ce.a,null,r.a.createElement(le.a,null,"Country Name"),r.a.createElement(se.a,null,e.countryName)),r.a.createElement(ce.a,null,r.a.createElement(le.a,null,"Country ISO Code"),r.a.createElement(se.a,null,e.countryISOCode)),r.a.createElement(ce.a,null,r.a.createElement(le.a,null,"Date Time"),r.a.createElement(se.a,null,Object(ie.b)(e.createdAt))),r.a.createElement(ce.a,null,r.a.createElement(le.a,null,"Application ID"),r.a.createElement(se.a,null,e.ID)))))))}}]),a}(r.a.Component),me=t(507),ue=(t(133),t(157)),de=t.n(ue),pe=t(56),he=function(e){function a(){return Object(u.a)(this,a),Object(p.a)(this,Object(h.a)(a).apply(this,arguments))}return Object(b.a)(a,e),Object(d.a)(a,[{key:"renderTable",value:function(){var e=this.props,a=e.documents,t=e.pending,n=e.error;if(console.log(t,n),t)return r.a.createElement("div",{className:"text-center"},r.a.createElement(D.a,{type:"ball-scale"}));if(n){if(!n.accountID)return r.a.createElement("div",{className:"dropdown-menu-header"},r.a.createElement("div",{className:"dropdown-menu-header-inner bg-primary"},r.a.createElement("div",{className:"menu-header-content"},r.a.createElement("div",{className:"widget-subheading"},n))));var c=n;return r.a.createElement(F.a,{className:"card-shadow-primary profile-responsive card-border mb-3"},r.a.createElement(J.a,null,"\u0417\u0430\u044f\u0432\u043a\u0430 \u0443\u0436\u0435 \u043e\u0442\u043a\u0440\u044b\u0442\u043e "),r.a.createElement("div",{className:"dropdown-menu-header"},r.a.createElement("div",{className:"dropdown-menu-header-inner bg-info"},r.a.createElement("div",{className:"menu-header-image opacity-2",style:{backgroundImage:"url("+de.a+")"}}),r.a.createElement("div",{className:"menu-header-content btn-pane-right"},r.a.createElement("div",{className:"avatar-icon-wrapper mr-2 avatar-icon-xl"},r.a.createElement("div",{className:"avatar-icon rounded"},r.a.createElement("img",{alt:"Avatar 5",src:void 0!==c.avatar?"https://wssdev.nexustls.com/files/file/".concat(c.avatar,"/medium"):k.a}))),r.a.createElement("div",null,r.a.createElement("h5",{className:"menu-header-title"},c.firstName," ",c.lastName))))),r.a.createElement(L.a,{className:"p-0"},r.a.createElement(re.a,{flush:!0},r.a.createElement(ce.a,null,r.a.createElement("b",{className:"text-dark"},"First Name: "),c.firstName),r.a.createElement(ce.a,null,r.a.createElement("b",{className:"text-dark"},"Last Name: "),c.lastName),r.a.createElement(ce.a,null,r.a.createElement("b",{className:"text-dark"},"User Name: "),c.username),r.a.createElement(ce.a,null,r.a.createElement("b",{className:"text-dark"},"Account ID: "),c.accountID))))}return 0==a.length?r.a.createElement("div",{className:"dropdown-menu-header"},r.a.createElement("div",{className:"dropdown-menu-header-inner bg-primary"},r.a.createElement("div",{className:"menu-header-content"},r.a.createElement("div",{className:"widget-subheading"},"There are no documents")))):a.length>0?r.a.createElement(me.a,{bordered:!0,className:"mb-0"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Document Info"),r.a.createElement("th",null,"Image"))),a.map(function(e,a){return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},a+1),r.a.createElement("td",{width:"50%"},r.a.createElement("b",{className:"text-dark"},"Status: "),Object(ie.c)(e.status),r.a.createElement("div",{className:"divider"}),r.a.createElement("b",{className:"text-dark"},"File name: "),e.fileInfo.originalName,r.a.createElement("div",{className:"divider"}),r.a.createElement("b",{className:"text-dark"},"Type name: "),e.documentType.typeName),r.a.createElement("td",{align:"center",height:"200px",width:"40%"},r.a.createElement(pe.RViewer,{imageUrls:"http://10.7.8.129:9004/document/".concat(e.ID),options:X.J},r.a.createElement(pe.RViewerTrigger,null,r.a.createElement("img",{src:"http://10.7.8.129:9004/document/".concat(e.ID),style:{cursor:"pointer","max-width":"100%","max-height":"100%",verticalAlign:"middle"}}))))))})):void 0}},{key:"render",value:function(){var e=this.props,a=(e.documents,e.pending,e.error);return console.log(a),r.a.createElement(n.Fragment,null,r.a.createElement(T.a,{lg:"12",xl:"6"},r.a.createElement(F.a,{className:"main-card mb-3"},r.a.createElement(J.a,{className:"card-header-tab"},r.a.createElement("div",{className:"card-header-title"},"Documents")),r.a.createElement(L.a,null,this.renderTable()))))}}]),a}(r.a.Component),Ee=t(618),be=function(e){function a(){var e;return Object(u.a)(this,a),(e=Object(p.a)(this,Object(h.a)(a).call(this))).state={startProcedure:!1,page:0,pageSize:100},e.handleStartProcedure=e.handleStartProcedure.bind(Object(E.a)(e)),e.handleDoneProcedure=e.handleDoneProcedure.bind(Object(E.a)(e)),e.handleGetApplications=e.handleGetApplications.bind(Object(E.a)(e)),e}return Object(b.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,a=e.fetchDocuments,t=e.application;e.fetchUsers;t?a({applicationID:t.ID}):this.props.history.goBack()}},{key:"handleStartProcedure",value:function(){this.setState({startProcedure:!0})}},{key:"handleDoneProcedure",value:function(){this.setState({startProcedure:!1})}},{key:"handleGetApplications",value:function(){var e=this,a=this.props.applications.filter(function(a){return a.ID!==e.props.application.ID});a.length>0&&this.props.history.push("/passport-manager/applications/".concat(a[0].ID))}},{key:"render",value:function(){var e=this.state.startProcedure,a=this.props,t=a.application,c=a.match,l=a.documents,s=a.errorDoc,i=a.pendingDoc;return e&&t?r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{component:"div",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1,transitionName:"TabsAnimation"},r.a.createElement(Ee.a,{accountID:t.accountID,applicationID:t.ID,backUrl:c.url,documents:l,handleDoneProcedure:this.handleDoneProcedure,handleGetApplications:this.handleGetApplications}))):t?r.a.createElement(n.Fragment,null,r.a.createElement(f.a,{component:"div",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1,transitionName:"TabsAnimation"},r.a.createElement(te.a,{fluid:!0},r.a.createElement(B.a,null,r.a.createElement(T.a,{md:"12"},r.a.createElement(F.a,{className:"main-card mb-3"},r.a.createElement(J.a,{className:"card-header-tab"},r.a.createElement("div",{className:"card-header-title"},r.a.createElement(P.a,{className:"border-0 btn-pill btn-wide btn-transition active",color:"alternate",disabled:0===l.length||"PENDING"!==t.status,onClick:this.handleStartProcedure,outline:!0},"Begin review")),r.a.createElement("div",{className:"btn-actions-pane-right"},"Status ","    ",r.a.createElement(P.a,{className:"mb-2 mr-2 btn-transition",color:"alternate",disabled:!0,outline:!0},t.status))),r.a.createElement(L.a,{className:"main-card mb-3"},r.a.createElement(B.a,null,r.a.createElement(oe,{application:t}),r.a.createElement(he,{documents:l,error:s,pending:i}))))))))):r.a.createElement("div",null)}}]),a}(r.a.Component),ge=Object(c.f)(be),fe=Object(v.b)(function(e,a){var t=a.match.params.applicationID;return{pendingDoc:e.passport.pending,errorDoc:e.passport.error,users:e.user.users,pending:e.user.pending,error:e.user.error,documents:e.passport.documents,application:e.user.applications.find(function(e){return e.ID===t}),applications:e.user.applications}},function(e){return{fetchDocuments:function(a){return e(Object(ne.d)(a))},fetchUsers:function(a){return e(Object(I.b)(a))},deleteApplication:function(a){return e(Object(ne.a)(a))},fetchApplications:function(a){return e(Object(ne.c)(a))}}})(ge);a.default=Object(c.f)(function(e){var a=e.match;console.log("User Manager");JSON.parse(localStorage.getItem(ae));return r.a.createElement(l.a,null,r.a.createElement(c.b,{component:Q,exact:!0,path:"".concat(a.url,"/users")}),r.a.createElement(c.b,{component:ee,exact:!0,path:"".concat(a.url,"/users/:accountID"),searchPassportManager:!1}),r.a.createElement(c.b,{component:fe,exact:!0,path:"/user-manager/users/applicaion/:applicationID"}))})}}]);
//# sourceMappingURL=6.8f022e07.chunk.js.map